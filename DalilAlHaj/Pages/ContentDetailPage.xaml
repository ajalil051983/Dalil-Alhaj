<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:toolkit="http://schemas.microsoft.com/dotnet/2022/maui/toolkit"
             xmlns:res="clr-namespace:DalilAlHaj.Resources.Localization"
             x:Class="DalilAlHaj.Pages.ContentDetailPage"
             BackgroundColor="{AppThemeBinding Light=#F5F5F5, Dark=#1C1C1E}">

    <ScrollView>
        <VerticalStackLayout Padding="20" Spacing="20">

            <!-- Category Header -->
            <Border x:Name="HeaderFrame"
                    StrokeShape="RoundRectangle 15"
                    Padding="15"
                    BackgroundColor="{AppThemeBinding Light=White, Dark=#2C2C2E}"
                    StrokeThickness="0">
                <Border.Shadow>
                    <Shadow Brush="Black" Opacity="0.5" />
                </Border.Shadow>
                <HorizontalStackLayout Spacing="10">
                    <Label x:Name="CategoryIcon" 
                           FontSize="32"
                           VerticalOptions="Center" />
                    <Label x:Name="CategoryTitle" 
                           FontSize="18" 
                           FontAttributes="Bold"
                           TextColor="{AppThemeBinding Light=#2C3E50, Dark=#F5F5F5}"
                           VerticalOptions="Center" />
                </HorizontalStackLayout>
            </Border>

            <!-- SubCategory Title with Audio and Action Buttons -->
            <Border BackgroundColor="{AppThemeBinding Light=White, Dark=#2C2C2E}"
                    StrokeShape="RoundRectangle 15"
                    Padding="20"
                    StrokeThickness="0">
                <Border.Shadow>
                    <Shadow Brush="Black" Opacity="0.5" />
                </Border.Shadow>
                <Grid RowDefinitions="Auto,Auto" 
                      RowSpacing="15">
                    
                    <!-- Hidden Audio Player -->
                    <toolkit:MediaElement x:Name="AudioPlayer"
                                         HeightRequest="0"
                                         ShouldAutoPlay="False"
                                         ShouldShowPlaybackControls="False"
                                         IsVisible="False"/>
                    
                    <!-- Row 1: Icon, Title, and Audio Button -->
                    <Grid Grid.Row="0"
                          ColumnDefinitions="Auto,*,Auto"
                          ColumnSpacing="20">
                        
                        <!-- Icon on the right -->
                        <Label Grid.Column="0"
                               Text="ðŸ“–" 
                               FontSize="40"
                               VerticalOptions="Center" />
                        
                        <!-- Title in the center -->
                        <Label Grid.Column="1"
                               x:Name="SubCategoryTitle" 
                               FontSize="22" 
                               FontAttributes="Bold"
                               VerticalOptions="Center"
                               HorizontalOptions="Start"
                               TextColor="{AppThemeBinding Light=#2C3E50, Dark=#F5F5F5}" />
                        
                        <!-- Audio Button on the left -->
                        <HorizontalStackLayout Grid.Column="2"
                                               Spacing="5"
                                               VerticalOptions="Center"
                                               x:Name="AudioControlsStack">
                            <Label Text="ðŸ”Š" 
                                   FontSize="20"
                                   VerticalOptions="Center" />
                            <Button x:Name="PlayPauseButton"
                                    AutomationId="PlayPauseButtonID"
                                    Text="â–¶ï¸"
                                    Clicked="OnPlayPauseClicked"
                                    BackgroundColor="#3498DB"
                                    TextColor="White"
                                    CornerRadius="20"
                                    WidthRequest="45"
                                    HeightRequest="45"
                                    FontSize="18"
                                    Padding="0" />
                        </HorizontalStackLayout>
                    </Grid>
                    
                    <!-- Row 2: Action Buttons -->
                    <HorizontalStackLayout Grid.Row="1"
                                           Spacing="10"
                                           HorizontalOptions="Center">

                        <VerticalStackLayout Spacing="0" WidthRequest="80">
                            <Button x:Name="FavoriteButton"
                                    AutomationId="FavoriteButtonID"
                                    Clicked="OnFavoriteClicked"
                                    BackgroundColor="#E74C3C"
                                    TextColor="White"
                                    CornerRadius="10"
                                    Padding="0"
                                    FontSize="10"
                                    LineBreakMode="NoWrap"/>
                        </VerticalStackLayout>

                        <VerticalStackLayout Spacing="0" WidthRequest="80">
                            <Button Text="{x:Static res:AppResources.CopyText}" 
                                    Clicked="OnCopyClicked"
                                    BackgroundColor="#95A5A6"
                                    TextColor="White"
                                    CornerRadius="10"
                                    Padding="0"
                                    FontSize="10"
                                    LineBreakMode="NoWrap"/>
                        </VerticalStackLayout>

                        <VerticalStackLayout Spacing="0" WidthRequest="80">
                            <Button Text="{x:Static res:AppResources.Share}" 
                                    Clicked="OnShareClicked"
                                    BackgroundColor="#27AE60"
                                    TextColor="White"
                                    CornerRadius="10"
                                    Padding="0"
                                    FontSize="10"
                                    LineBreakMode="NoWrap"/>
                        </VerticalStackLayout>
                    </HorizontalStackLayout>
                </Grid>
            </Border>

            <!-- Content -->
            <Border BackgroundColor="{AppThemeBinding Light=White, Dark=#2C2C2E}"
                    StrokeShape="RoundRectangle 15"
                    Padding="25"
                    StrokeThickness="0">
                <Border.Shadow>
                    <Shadow Brush="Black" Opacity="0.5" />
                </Border.Shadow>
                <VerticalStackLayout Spacing="15">
                    <Label x:Name="ContentLabel"
                           Text="{x:Static res:AppResources.Content}" 
                           FontSize="18" 
                           FontAttributes="Bold"
                           TextColor="{AppThemeBinding Light=#2C3E50, Dark=#F5F5F5}" />

                    <BoxView HeightRequest="2" 
                             Color="#3498DB" 
                             HorizontalOptions="Fill" />

                    <Label x:Name="ContentText" 
                           FontSize="17"
                           LineHeight="1.6"
                           LineBreakMode="WordWrap"
                           TextColor="{AppThemeBinding Light=#2C3E50, Dark=#F5F5F5}" />
                </VerticalStackLayout>
            </Border>

        </VerticalStackLayout>
    </ScrollView>

</ContentPage>
